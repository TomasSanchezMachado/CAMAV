{% extends "base.html" %} {% load static %} {% block content %}
<div class="container py-4">
  <h2 class="mb-4">
    {% if operario %}Editar operario{% else %}Agregar nuevo operario{% endif %}
  </h2>

  <form method="post" class="card p-4 shadow-sm">
    {% csrf_token %} {% if operario %}
    <input type="hidden" name="op_id" value="{{ operario.id }}" />
    {% endif %}

    <div class="mb-3">
      <label class="form-label">Legajo</label>
      <input
        type="text"
        name="legajo"
        class="form-control"
        required
        value="{{ operario.legajo|default_if_none:'' }}"
      />
    </div>

    <div class="mb-3">
      <label class="form-label">Nombre</label>
      <input
        type="text"
        name="nombre"
        class="form-control"
        required
        value="{{ operario.nombre|default_if_none:'' }}"
      />
    </div>

    <div class="mb-3">
      <label class="form-label">Apellido</label>
      <input
        type="text"
        name="apellido"
        class="form-control"
        required
        value="{{ operario.apellido|default_if_none:'' }}"
      />
    </div>

    <div class="mb-3">
      <label class="form-label">Contraseña</label>
      <input
        type="password"
        name="password"
        class="form-control"
        {%
        if
        not
        operario
        %}required{%
        endif
        %}
        placeholder="{% if operario %}Dejar vacío para mantener la actual{% else %}Ingrese contraseña{% endif %}"
      />
    </div>

    <div class="mb-3">
      <label class="form-label">Estado inicial</label>
      <input
        type="text"
        name="estado"
        class="form-control bg-light"
        value="{{ operario.estado|default:'Libre' }}"
        readonly
      />
    </div>

    <div class="d-flex justify-content-between">
      <a href="{% url 'estado_operarios' %}" class="btn btn-secondary"
        >Cancelar</a
      >
      <button type="submit" class="btn btn-success">Guardar operario</button>
    </div>
  </form>
</div>
{% endblock %}
